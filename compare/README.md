# Maple面向对象探讨
对比新的面向对象和老的面向对象的方法，分析各自的优劣。
+ 老的面向对象是通过返回module的proc实现的，称之为工厂模式。
+ 新的面对对象是通过option/object实现的。

从以下几个方面进行比较：
+ 构造：都可以通过调用函数进行，概念上能够认为调用了构造函数。
    + 老版可以让工厂和概念上的对象同名。
    + 新版通过实现ModuleApply实现。
+ 复制：
    + 老版需要自行实现。
    + 新版可以使用Object函数。
+ 方法调用：
    + 老版可以通过 obj:-fun 的形式进行调用，符合一般OOP的习惯。
    + 新版只能使用 fun(...,obj,...) 进行调用。
+ 方法定义：
    + 老版可以直接在方法中访问属性。
    + 新版需要通过传递的对象参数进行访问，而且每个方法都写一遍static累死了。
+ 内存使用：
    + 老版的每个对象的方法和属性都是单独的。
    + 新版通过static选项可以共用方法和属性，比较节省内存。
+ 运算符重载：
    + 老版的重载方法在对象外部定义，需要放在package内实现，必须有overload选项才不会干扰默认实现。而且参数的位置需要是固定的，例如`{}`操作就很难用该方法重载实现多类型的版本。
    + 新版的重载方法可以在内部直接定义，可以不写overload选项，任意位置包含该类型参数都会调用该方法。
+ 类型判定：
    + 老版需要另外注册类型，且只能通过module的export来识别，不够精确。例如本例中的type(mystring,MyString)=fase,type(MyString,mystring)=true;
    + 新版会自动注册类型，且识别比较精确。

综上所述：
+ 在`对象构造`上，两者差不多。
+ 在`方法调用`和`方法定义`上，老版更方便。
+ 在`对象复制`,`类型判断`,`运算符重载`,`内存使用`上，新版更优秀。

结论是：
+ 在不使用运算符重载和不在意内存使用时，老版因为能够支持`obj:-fun`的定义和调用，使用更加方便，且兼容性更好。
+ 在使用运算符重载和在意内存使用的情况下，新版更好。